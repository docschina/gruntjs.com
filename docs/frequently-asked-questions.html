<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/WebPage"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>常见问题 - Grunt: The JavaScript 世界的构建工具 - Grunt中文</title><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700"><link rel="stylesheet" href="/css/main.css"><link rel="apple-touch-icon" href="/img/favicons/apple-touch-icon.png" sizes="180x180"><link rel="icon" type="image/png" href="/img/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/img/favicons/favicon-16x16.png" sizes="16x16"><link rel="manifest" href="/img/favicons/manifest.json"><link rel="mask-icon" href="/img/favicons/safari-pinned-tab.svg" color="#e48632"><link rel="shortcut icon" href="/img/favicons/favicon.ico" type="image/x-icon"><meta name="msapplication-config" content="/img/favicons/browserconfig.xml"><meta name="theme-color" content="#e48632"><meta property="og:title" content="常见问题 - Grunt: The JavaScript 世界的构建工具 - Grunt中文"><meta property="og:type" content="website"><meta property="og:url" content="https://gruntjs.com/"><meta property="og:image" content="https://gruntjs.com/img/og.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="256"><meta property="og:image:height" content="256"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@gruntjs"><meta name="twitter:site" content="@gruntjs"><meta name="twitter:title" content="常见问题 - Grunt: The JavaScript 世界的构建工具 - Grunt中文"><meta itemprop="name" content="Grunt"><meta itemprop="image" content="/img/og.png"><link href="/atom.xml" rel="alternate" title="Grunt Blog Feed" type="application/atom+xml"></head><body class="page-docs page-secondary"><div class="navbar navbar-inverse"><div class="navbar-inner"><div class="container"><a class="brand" href="/"><span class="logo"></span></a><div class="nav-collapse collapse"><ul class="nav"><li><a href="/docs/getting-started.html"><i class="icon-arrow-right"></i><span>快速入门</span></a></li><li><a href="/docs/configuring-tasks.html"><i class="icon-cog"></i><span>配置任务</span></a></li><li><a href="/plugins.html"><i class="icon-power-cord"></i><span>插件列表</span></a></li><li><a href="/docs/getting-started.html"><i class="icon-file-text"></i><span>文档</span></a></li></ul><form class="navbar-search pull-right"><input class="search-query" type="text" placeholder="Search"></form></div><!--.nav-collapse--></div></div></div><div class="content"><div class="container frequently-asked-questions"><div class="row-fluid"><div class="span9 page"><div class="hero-unit"><h1>常见问题</h1><h1>常见问题</h1>
<h2><a class="anchor" href="#grunt" id="grunt"></a>如何安装grunt?</h2>
<p>对于常规的安装说明，请阅读<a href="/getting-started{{{快速入门}}/">Getting Started{{{快速入门}}</a>指南。如果在阅读完之后你需要更多的详细信息，你可以阅读更详细的的<a href="/installing-grunt{{安装-grunt}}/">Installing grunt{{安装 Grunt}}</a>指南。</p>
<h3>什么时候我将可以使用开发中的&#39;某某&#39;特性?</h3>
<p>在<a href="/installing-grunt{{安装-grunt}}/">Installing grunt{{安装 Grunt}}</a>指南中介绍了如何安装已发布的和未发布的开发版本的Grunt。</p>
<h3><a class="anchor" href="#grunt-windows" id="grunt-windows"></a>Grunt可以在Windows上工作吗?</h3>
<p>Grunt可以很好的在windows上工作，因为<a href="https://nodejs.org/">Node.js</a>和<a href="https://www.npmjs.com/">npm</a>都能够很好的在windows上工作。通常情况下，问题在于<a href="http://www.cygwin.com/">Cygwin</a>，因为它捆绑着一个较老版本的Node.js。</p>
<p>避免这个问题最好的办法是使用<a href="http://msysgit.github.com/">msysGit installer</a>安装二进制的<code>git</code>和使用<a href="https://nodejs.org/#download">Node.js installer</a>去安装二进制的<code>node</code>和<code>npm</code>，然后使用内置的<a href="http://www.cs.princeton.edu/courses/archive/spr05/cos126/cmd-prompt.html">Windows command prompt</a> 或 <a href="http://support.microsoft.com/kb/968929">PowerShell</a> 去替代Cygwin。</p>
<h2>为什么我的异步任务不能执行完毕？</h2>
<p>这是因为你忘记调用 <a href="/grunt.task#wiki-this-async">this.async</a> 方法来告知Grunt你的task是异步执行的。为了简化模型，Grunt采用同步模式的编码风格，你可以通过在任务中调用 <code>this.async()</code> 切换到异步模式。</p>
<p>注意，如果task执行失败，可以传递 <code>false</code> 给 <code>done()</code> 函数告知Grunt。</p>
<p>案例：</p>
<pre><code class="lang-js">grunt.registerTask(<span class="hljs-string">'asyncme'</span>, <span class="hljs-string">'My asynchronous task.'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> done = <span class="hljs-keyword">this</span>.async();
  doSomethingAsync(done);
});</code></pre>
<h2><a class="anchor" href="#shell-tab" id="shell-tab"></a>如何启用shell中的tab键自动补全功能?</h2>
<p>为了给grunt增加tab键自动补功能，可以在你的<code>~/.bashrc</code>文件中添加下面一行代码：</p>
<pre><code class="lang-bash"><span class="hljs-built_in">eval</span> <span class="hljs-string">"<span class="hljs-variable">$(grunt --completion=bash)</span>"</span></code></pre>
<p>当然，假设你已经使用<code>npm install -g grunt</code>在全局安装好了Grunt。因为Grunt目前仅仅支持bash命令。</p>
<h2>我如让多个任务共享参数？</h2>
<p>虽然每个任务可以使用它自己的参数，但是，这里有几个方法允许你在多个task中共享参数。</p>
<h3>&quot;动态的&quot; 任务别名</h3>
<p><strong>这是多个任务共享参数的首选方法</strong></p>
<p>鉴于<a href="/grunt#wiki-grunt-registertask">任务别名</a>是很简单的，一个普通的task可以使用<a href="/grunt.task#wiki-grunt-task-run">grunt.task.run</a>让一个函数作为“动态的”任务别名。在下面这个案例中，在命令行中执行<code>grunt build:001</code>，最终效果是执行<code>foo:001</code>、<code>bar:001</code> 和 <code>baz:001</code>这三个task。</p>
<pre><code class="lang-js">grunt.registerTask(<span class="hljs-string">'build'</span>, <span class="hljs-string">'Run all my build tasks.'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) </span>{
  <span class="hljs-keyword">if</span> (n == <span class="hljs-literal">null</span>) {
    grunt.warn(<span class="hljs-string">'Build num must be specified, like build:001.'</span>);
  }
  grunt.task.run(<span class="hljs-string">'foo:'</span> + n, <span class="hljs-string">'bar:'</span> + n, <span class="hljs-string">'baz:'</span> + n);
});</code></pre>
<h3>-- 选项</h3>
<p>多个任务共享参数的方式是使用<a href="/grunt#wiki-grunt-option">grunt.option</a>。在这里有一个例子，在命令行中执行<code>grunt deploy --target=staging</code>会让<code>grunt.option(&#39;target&#39;)</code>返回<code>&quot;staging&quot;</code>。</p>
<pre><code class="lang-js">grunt.registerTask(<span class="hljs-string">'upload'</span>, <span class="hljs-string">'Upload code to specified target.'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> target = grunt.option(<span class="hljs-string">'target'</span>);
  <span class="hljs-comment">// do something useful with target here</span>
});
grunt.registerTask(<span class="hljs-string">'deploy'</span>, [<span class="hljs-string">'validate'</span>, <span class="hljs-string">'upload'</span>]);</code></pre>
<p><em>注意，布尔类型的参数可以使用一个没有值的键。例如，在命令行中执行<code>grunt deploy --staging</code>会让<code>grunt.option(&#39;staging&#39;)</code> 返回<code>true</code>。</em></p>
<h3>全局和配置</h3>
<p>在其他情况下，你可能希望暴露一个设置配置或者全局的值方法。 在这种情况下，可以在注册任务时设置其参数作为一个全局对象的或者项目配置的值。</p>
<p>在下面的例子中，在命令行运行<code>grunt set_global:name:peter set_config:target:staging deploy</code>会导致<code>global.name</code>的值为<code>&quot;peter&quot;</code>以及<code>grunt.config(&#39;target&#39;)</code>将会返回<code>&quot;staging&quot;</code>。由此推断，<code>deploy</code>任务就可以使用这些值。</p>
<pre><code class="lang-js">grunt.registerTask(<span class="hljs-string">'set_global'</span>, <span class="hljs-string">'Set a global variable.'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, val</span>) </span>{
  global[name] = val;
});

grunt.registerTask(<span class="hljs-string">'set_config'</span>, <span class="hljs-string">'Set a config property.'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name, val</span>) </span>{
  grunt.config.set(name, val);
});</code></pre>
<h2>当出现错误时如何获取调用栈的追踪信息？</h2>
<p>使用 <code>--stack</code> 参数就可以看到调用栈的追踪信息了。例如：<code>grunt task --stack</code> 。</p>
<h2><a class="anchor" href="#maximum-call-stack-size-exceeded" id="maximum-call-stack-size-exceeded"></a>为什么出现 &quot;Maximum call stack size exceeded（超出最大调用栈大小）&quot; 的错误？</h2>
<p>你可能是为某个任务创建的别名和其他任务重名了。
例如：<code>grunt.registerTask(&#39;uglify&#39;, [&#39;uglify:my_target&#39;]);</code> 应该是 <code>grunt.registerTask(&#39;myUglify&#39;, [&#39;uglify:my_target&#39;]);</code>。</p>
<h2>如何卸载或移除不需要的插件？</h2>
<p>至少有两种方法。一种方法时利用 <code>npm uninstall [GRUNT_PLUGIN] --save-dev</code> 指令，这将从 <code>package.json</code> 文件和 <code>node_modules</code> 目录下同时移除指定的插件。另一种方法时手工从 <code>package.json</code> 文件中删除依赖项，然后执行 <code>npm prune</code> 指令。</p>
<h2><a class="anchor" href="#fail-to-install-with-npm-error:-no-compatible-version-found" id="fail-to-install-with-npm-error:-no-compatible-version-found"></a>出现错误 &quot;Fail to install with npm error: No compatible version found&quot;</h2>
<p>请确保安装了最新稳定版本的 <a href="https://nodejs.org/">NPM 和 Node.JS</a>。</p>
<hr>
<h2><a class="anchor" href="#grunt-0.3" id="grunt-0.3"></a>grunt 0.3 的相关问题</h2>
<h3><a class="anchor" href="#windows-grunt-0.3-grunt-js" id="windows-grunt-0.3-grunt-js"></a>在Windows的 Grunt 0.3中，为什么当我尝试运行grunt时我的JS编辑器会打开?</h3>
<p>如果你在<a href="/getting-started">Gruntfile</a>所在的目录中时，当你输入grunt时Windows会尝试去执行<em>那个文件</em>。因此你需要输入<code>grunt.cmd</code>。</p>
<p>另一个选择是使用<code>DOSKEY</code>命令去创建一个Grunt宏，请参考<a href="https://gist.github.com/vladikoff/38307908088d58af206b">这篇文章</a>。这样就可以使用<code>grunt</code>替代<code>grunt.cmd</code>了。</p>
<p>可以使用所示如下的<code>DOSKEY</code>命令:</p>
<pre><code>DOSKEY grunt=grunt.cmd $*</code></pre>
<div class="end-link">Found an error in the documentation?
<a href='https://github.com/gruntjs/grunt-docs/issues'>File an issue</a>.</div></div></div><div class="span3"><div class="well sidebar-nav"><ul class="nav nav-list"><li class="nav-header"><i class="icon-file-text"></i><span>文档</span></li><li><a href="/docs/getting-started.html">快速入门</a></li><li><a href="/docs/configuring-tasks.html">配置任务</a></li><li><a href="/docs/sample-gruntfile.html">Gruntfile 实例</a></li><li><a href="/docs/creating-tasks.html">创建任务</a></li><li><a href="/docs/creating-plugins.html">Creating Plugins</a></li><li><a href="/docs/using-the-cli.html">用命令行工具</a></li></ul><ul class="nav nav-list"><li class="nav-header"><span>进阶知识</span></li><li><a href="/api/grunt.html">API</a></li><li><a href="/docs/installing-grunt.html">安装 Grunt</a></li><li><a class="active" href="/docs/frequently-asked-questions.html">常见问题</a></li><li><a href="/docs/project-scaffolding.html">项目脚手架</a></li></ul><ul class="nav nav-list"><li class="nav-header"><span>社区</span></li><li><a href="/docs/help-resources.html">帮助资源</a></li><li><a href="/docs/who-uses-grunt.html">谁在用 Grunt</a></li><li><a href="/docs/built-with-grunt-badge.html">Grunt 勋章</a></li><li><a href="/docs/contributing.html">贡献</a></li><li><a href="/docs/development-team.html">开发团队</a></li></ul><ul class="nav nav-list"><li class="nav-header"><span>Migration guides</span></li><li><a href="/docs/upgrading-from-0.3-to-0.4.html">从 0.3 升级至 0.4</a></li><li><a href="/docs/upgrading-from-0.4-to-1.0.html">从 0.4 升级至 1.0</a></li></ul><div class="advertisements"><script>var m3_u = (location.protocol=='https:'?'https://revive.bocoup.com/www/delivery/ajs.php':'http://revive.bocoup.com/www/delivery/ajs.php');var m3_r = Math.floor(Math.random()*99999999999);if (!document.MAX_used) document.MAX_used = ',';document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);document.write ("?zoneid=5");document.write ('&amp;cb=' + m3_r);if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));document.write ("&amp;loc=" + escape(window.location));if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));if (document.context) document.write ("&context=" + escape(document.context));if (document.mmm_fo) document.write ("&amp;mmm_fo=1");document.write ("'><\/scr"+"ipt>");</script><noscript><a href='http://revive.bocoup.com/www/delivery/ck.php?n=a656788f&amp;cb=INSERT_RANDOM_NUMBER_HERE' target='_blank'><img src='http://revive.bocoup.com/www/delivery/avw.php?zoneid=5&amp;cb=INSERT_RANDOM_NUMBER_HERE&amp;n=a656788f' alt='' /></a></noscript><span class="adsbybocoup">Ads by <a href="http://bocoup.com">Bocoup</a>.</span></div></div></div></div></div></div><footer class="grunt-footer"><div class="inner"><div class="container"><ul class="pull-right"><li><a href="/blog">Blog</a></li><li><a href="/docs/upgrading-from-0.3-to-0.4.html">迁移指南</a></li><li><a href="/docs/contributing.html">贡献</a></li><li><a href="/docs/development-team.html">开发团队</a></li><li class="social"><a href="https://github.com/gruntjs/" title="Grunt on GitHub"><span class="icon-github"></span></a></li><li class="social"><a href="https://twitter.com/gruntjs/" title="Grunt on Twitter"><span class="icon-twitter"></span></a></li><li class="social"><a href="/atom.xml" title="Grunt blog RSS feed"><span class="icon-rss"></span></a></li></ul></div></div></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-34623937-1', 'gruntjs.com');
ga('send', 'pageview');</script></body></html>